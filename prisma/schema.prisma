generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model District {
  distNbr            Int       @id @map("DIST_NBR")
  distNm             String    @map("DIST_NM") @db.VarChar(50)
  distAbrvn          String?   @map("DIST_ABRVN") @db.VarChar(3)
  finArea            String?   @map("FIN_AREA") @db.VarChar(50)
  finAreaBsnesNbr    String?   @map("FIN_AREA_BSNES_NBR") @db.VarChar(50)
  rentCoordDistCdNbr String?   @map("RENT_COORD_DIST_CD_NBR") @db.VarChar(50)
  rentals            Rental[]
  sections           Section[]
  users              User[]

  @@map("DIST")
}

model Section {
  sectId   Int      @id @default(autoincrement()) @map("SECT_ID")
  distNbr  Int      @map("DIST_NBR")
  sectNbr  String?  @map("SECT_NBR") @db.VarChar(15)
  sectNm   String?  @map("SECT_NM") @db.VarChar(100)
  rentals  Rental[]
  users    User[]
  district District @relation(fields: [distNbr], references: [distNbr])

  @@map("SECTION")
}

model Nigp {
  nigpCd         String   @id @map("NIGP_CD") @db.VarChar(30)
  ctgryId        Int?     @map("CTGRY_ID")
  fnavCat        String?  @map("FNAV_CAT") @db.VarChar(13)
  dscr           String?  @map("DSCR") @db.VarChar(125)
  avgMonthlyRate Decimal? @map("AVG_MONTHLY_RATE") @db.Decimal(10, 2)
  rentals        Rental[]

  @@map("NIGP")
}

model User {
  usrId      String    @id @map("USR_ID") @db.VarChar(18)
  usrRole    String    @map("USR_ROLE") @db.VarChar(50)
  firstNm    String    @map("FIRST_NM") @db.VarChar(30)
  lastNm     String    @map("LAST_NM") @db.VarChar(30)
  usrEmail   String?   @map("USR_EMAIL") @db.VarChar(50)
  usrPhnNbr  String?   @map("USR_PHN_NBR") @db.VarChar(20)
  distNbr    Int?      @map("DIST_NBR")
  sectId     Int?      @map("SECT_ID")
  lastUpdtDt DateTime? @map("LAST_UPDT_DT")
  lastUpdtBy String?   @map("LAST_UPDT_BY") @db.VarChar(20)
  password   String    @db.VarChar(255)

  district   District? @relation(fields: [distNbr], references: [distNbr])
  section    Section?  @relation(fields: [sectId], references: [sectId])

  @@map("USERS")
}

model Rental {
  rentalId          Int                   @id @default(autoincrement()) @map("RENTAL_ID")
  sectId            Int                   @map("SECT_ID")
  distNbr           Int                   @map("DIST_NBR")
  nigpCd            String?               @map("NIGP_CD") @db.VarChar(30)
  rentStatus        String?               @map("RENT_STATUS") @db.VarChar(50)
  submitDt          DateTime?             @map("SUBMIT_DT") @db.Date
  dlvryRqstDt       DateTime?             @map("DLVRY_RQST_DT") @db.Date
  dlvryDt           DateTime?             @map("DLVRY_DT") @db.Date
  dlvryTime         String?               @map("DLVRY_TIME") @db.VarChar(10)
  callOffDt         DateTime?             @map("CALL_OFF_DT") @db.Date
  rentalDueDt       DateTime?             @map("RENTAL_DUE_DT") @db.Date
  rqstBy            String?               @map("RQST_BY") @db.VarChar(50)
  durLngth          Int?                  @map("DUR_LNGTH")
  durUom            String?               @map("DUR_UOM") @db.VarChar(50)
  eqpmtModel        String?               @map("EQPMT_MODEL") @db.VarChar(50)
  eqpmtMake         String?               @map("EQPMT_MAKE") @db.VarChar(100)
  eqpmtCmnt         String?               @map("EQPMT_CMNT")
  eqpmtAtchmt       String?               @map("EQPMT_ATCHMT") @db.VarChar(200)
  eqpmtQty          Int?                  @map("EQPMT_Qty")
  eqpmtQty1         Int?                  @map("EQPMT_Qty1")
  eqpmtQty2         Int?                  @map("EQPMT_Qty2")
  dlvryLocn         String?               @map("DLVRY_LOCN") @db.VarChar(1000)
  pocNm             String?               @map("POC_NM") @db.VarChar(50)
  pocPhnNbr         String?               @map("POC_PHN_NBR") @db.VarChar(15)
  pocScndryNm       String?               @map("POC_SCNDRY_NM") @db.VarChar(50)
  pocScndryPhnNbr   String?               @map("POC_SCNDRY_PHN_NBR") @db.VarChar(15)
  cfDeptNbr         String?               @map("CF_DEPT_NBR") @db.VarChar(10)
  cfAcctNbr         String?               @map("CF_ACCT_NBR") @db.VarChar(10)
  cfAppropYr        String?               @map("CF_APPROP_YR") @db.VarChar(10)
  cfAppropClass     String?               @map("CF_APPROP_CLASS") @db.VarChar(10)
  cfFund            String?               @map("CF_FUND") @db.VarChar(10)
  cfBusUnit         String?               @map("CF_BUS_UNIT") @db.VarChar(10)
  cfProj            String?               @map("CF_PROJ") @db.VarChar(20)
  cfActv            String?               @map("CF_ACTV") @db.VarChar(10)
  cfSrcType         String?               @map("CF_SRC_TYPE") @db.VarChar(10)
  cfTask            String?               @map("CF_TASK") @db.VarChar(25)
  spclInst          String?               @map("SPCL_INST") @db.VarChar(5000)
  rentCmnt          String?               @map("RENT_CMNT")
  serviceCallCmnt   String?               @map("SERVICE_CALL_CMNT")
  rcvdBy            String?               @map("RCVD_BY") @db.VarChar(50)
  poProcessorNm     String?               @map("PO_PROCESSOR_NM") @db.VarChar(50)
  poProcessorPhnNbr String?               @map("PO_PROCESSOR_PHN_NBR") @db.VarChar(15)
  troubleRentFlg    Boolean               @default(false) @map("TROUBLE_RENT_FLG")
  serviceCallFlg    Boolean?              @map("SERVICE_CALL_FLG")
  userRequestFlg    Boolean?              @map("USER_REQUEST_FLG")
  vendrUnitNbr      String?               @map("VENDR_UNIT_NBR")
  reasonCodes       String?               @map("REASON_CODES") @db.VarChar(50)
  onRentHrs         Decimal?              @map("ON_RENT_HRS") @db.Decimal(10, 2)
  offRentHrs        Decimal?              @map("OFF_RENT_HRS") @db.Decimal(10, 2)
  lastUpdtBy        String?               @map("LAST_UPDT_BY") @db.VarChar(50)
  lastUpdtDt        DateTime?             @map("LAST_UPDT_DT")
  district          District              @relation(fields: [distNbr], references: [distNbr])
  nigp              Nigp?                 @relation(fields: [nigpCd], references: [nigpCd])
  section           Section               @relation(fields: [sectId], references: [sectId])
  rentalPos         RentalPo[]
  statusHistory     RentalStatusHistory[]
  attachments       RentalAttachment[]
  invoiceLines      InvoiceLine[]
  claims            Claim[]

  @@map("RENTAL")
}

model PurchaseOrder {
  poId                Int        @id @default(autoincrement()) @map("PO_ID")
  poRlseNbr           String?    @map("PO_RLSE_NBR") @db.VarChar(50)
  poRcvdBy            String?    @map("PO_RCVD_BY") @db.VarChar(25)
  vendrNm             String?    @map("VENDR_NM") @db.VarChar(50)
  userRqstViaPurchFlg Boolean    @default(false) @map("USER_RQST_VIA_PURCH_FLG")
  poBuNbr             String?    @map("PO_BU_NBR") @db.VarChar(25)
  eRqstnNbr           String?    @map("E_RQSTN_NBR") @db.VarChar(25)
  poStatus            String?    @map("PO_STATUS") @db.VarChar(20)
  poStartDt           DateTime?  @map("PO_START_DT") @db.Date
  poExpirDt           DateTime?  @map("PO_EXPIR_DT") @db.Date
  txdotGps            Boolean    @default(false) @map("TXDOT_GPS")
  mnthEqRate          Decimal?   @map("MNTH_EQ_RATE") @db.Decimal(10, 2)
  poType              String?    @map("PO_TYPE") @db.VarChar(50)
  spclEvnt            String?    @map("SPCL_EVNT") @db.VarChar(100)
  lastUpdtBy          String?    @map("LAST_UPDT_BY") @db.VarChar(50)
  lastUpdtDt          DateTime?  @map("LAST_UPDT_DT")
  chartFieldsFlg      Boolean    @default(false) @map("CHART_FIELDS_FLG")
  vendorMail          String?    @map("VENDOR_MAIL") @db.VarChar(55)
  vendorPhnNbr        String?    @map("VENDOR_PHN_NBR") @db.VarChar(20)
  rentalPos           RentalPo[]
  invoiceLines        InvoiceLine[]
  claims              Claim[]

  @@map("PO")
}

model RentalPo {
  rentalPoId    Int           @id @default(autoincrement()) @map("RENTAL_PO_ID")
  rentalId      Int           @map("RENTAL_ID")
  poId          Int           @map("PO_ID")
  rental        Rental        @relation(fields: [rentalId], references: [rentalId])
  purchaseOrder PurchaseOrder @relation(fields: [poId], references: [poId])

  @@unique([rentalId, poId])
  @@map("RENTAL_PO")
}

model RentalStatusHistory {
  id        Int      @id @default(autoincrement()) @map("HIST_ID")
  rentalId  Int      @map("RENTAL_ID")
  status    String   @map("STATUS") @db.VarChar(50)
  actorId   String?  @map("ACTOR_ID") @db.VarChar(50)
  actorName String?  @map("ACTOR_NM") @db.VarChar(50)
  note      String?  @map("NOTE") @db.VarChar(2000)
  createdAt DateTime @default(now()) @map("CREATED_AT")

  rental Rental @relation(fields: [rentalId], references: [rentalId])

  @@map("RENTAL_STATUS_HISTORY")
}

model RentalAttachment {
  attachmentId   Int      @id @default(autoincrement()) @map("ATTACHMENT_ID")
  rentalId       Int      @map("RENTAL_ID")
  fileName       String   @map("FILE_NAME") @db.VarChar(255)
  fileSize       Int      @map("FILE_SIZE")
  fileMimeType   String   @map("FILE_MIME_TYPE") @db.VarChar(100)
  fileUrl        String   @map("FILE_URL") @db.VarChar(500)
  uploadedBy     String?  @map("UPLOADED_BY") @db.VarChar(50)
  uploadedByName String?  @map("UPLOADED_BY_NAME") @db.VarChar(100)
  uploadedAt     DateTime @default(now()) @map("UPLOADED_AT")

  rental Rental @relation(fields: [rentalId], references: [rentalId], onDelete: Cascade)

  @@map("RENTAL_ATTACHMENT")
}

model Invoice {
  invcId           Int            @id @default(autoincrement()) @map("INVC_ID")
  claimNbr         String?        @map("CLAIM_NBR") @db.VarChar(15)
  invcNbr          String?        @map("INVC_NBR") @db.VarChar(50)
  entryDt          DateTime?      @map("ENTRY_DT") @db.Date
  rentCoordRspnbl  String?        @map("RENT_COORD_RSPNBL") @db.VarChar(50)
  invcDt           DateTime?      @map("INVC_DT") @db.Date
  finStampDt       DateTime?      @map("FIN_STAMP_DT") @db.Date
  srvcStartDt      DateTime?      @map("SRVC_START_DT") @db.Date
  srvcStopDt       DateTime?      @map("SRVC_STOP_DT") @db.Date
  rcptDt           DateTime?      @map("RCPT_DT") @db.Date
  rcptNbr          String?        @map("RCPT_NBR") @db.VarChar(50)
  fodNotes         String?        @map("FOD_NOTES") @db.VarChar(255)
  invcStat         String?        @map("INVC_STAT") @db.VarChar(50)
  lastUpdtBy       String?        @map("LAST_UPDT_BY") @db.VarChar(50)
  lastUpdtDt       DateTime?      @map("LAST_UPDT_DT")
  finStat          String?        @map("FIN_STAT") @db.VarChar(25)
  finNotes         String?        @map("FIN_NOTES") @db.VarChar(255)
  finId            String?        @map("FIN_ID") @db.VarChar(25)
  finRspnbl        String?        @map("FIN_RSPNBL") @db.VarChar(50)
  invoiceLines     InvoiceLine[]

  @@map("INVC")
}

model InvoiceLine {
  invcLnId         Int             @id @default(autoincrement()) @map("INVC_LN_ID")
  poId             Int?            @map("PO_ID")
  itemAmt          Decimal?        @map("ITEM_AMT") @db.Decimal(10, 2)
  rentalId         Int?            @map("RENTAL_ID")
  invcId           Int?            @map("INVC_ID")
  invcFiscalYr     String?         @map("INVC_FISCAL_YR") @db.VarChar(4)
  invoice          Invoice?        @relation(fields: [invcId], references: [invcId])
  purchaseOrder    PurchaseOrder?  @relation(fields: [poId], references: [poId])
  rental           Rental?         @relation(fields: [rentalId], references: [rentalId])

  @@map("INVC_LN")
}

model Claim {
  claimNbr            String    @id @map("CLAIM_NBR") @db.VarChar(15)
  claimStat           String?   @map("CLAIM_STAT") @db.VarChar(100)
  claimNm             String?   @map("CLAIM_NM") @db.VarChar(500)
  rentalId            Int?      @map("RENTAL_ID")
  poId                Int?      @map("PO_ID")
  claimDscr           String?   @map("CLAIM_DSCR") @db.VarChar(500)
  vendrNm             String?   @map("VENDR_NM") @db.VarChar(50)
  vendrClaimDt        DateTime? @map("VENDR_CLAIM_DT") @db.Date
  claimStatCmnt       String?   @map("CLAIM_STAT_CMNT") @db.VarChar(500)
  claimAddlCmnt       String?   @map("CLAIM_ADDL_CMNT") @db.VarChar(500)
  occNotifDt          DateTime? @map("OCC_NOTIF_DT") @db.Date
  occClaimNbr         String?   @map("OCC_CLAIM_NBR") @db.VarChar(25)
  occConclusion       String?   @map("OCC_CONCLUSION") @db.VarChar(100)
  onRentFlag          Boolean   @default(false) @map("ON_RENT_FLAG")
  claimSetlmtAmt      Decimal?  @map("CLAIM_SETLMT_AMT") @db.Decimal(10, 2)
  rentCoordUserId     String?   @map("RENT_COORD_USER_ID") @db.VarChar(50)
  txdotRcvdDt         DateTime? @map("TXDOT_RCVD_DT") @db.Date
  claimPaidDt         DateTime? @map("CLAIM_PAID_DT") @db.Date
  emlRejctDt          DateTime? @map("EML_REJCT_DT") @db.Date
  lastFolupDt         DateTime? @map("LAST_FOLUP_DT") @db.Date
  vendrCntctNm        String?   @map("VENDR_CNTCT_NM") @db.VarChar(50)
  vendrCntctPhnNbr    String?   @map("VENDR_CNTCT_PHN_NBR") @db.VarChar(15)
  vendrCntctTtl       String?   @map("VENDR_CNTCT_TTL") @db.VarChar(50)
  vendrAddr1          String?   @map("VENDR_ADDR_1") @db.VarChar(50)
  vendrAddr2          String?   @map("VENDR_ADDR_2") @db.VarChar(50)
  lastUpdtBy          String?   @map("LAST_UPDT_BY") @db.VarChar(50)
  lastUpdtDt          DateTime? @map("LAST_UPDT_DT")
  distNm              String?   @map("DIST_NM") @db.VarChar(50)
  title43Claim        Boolean   @default(false) @map("TITLE_43_CLAIM")
  contractNbr         String?   @map("CONTRACT_NBR") @db.VarChar(50)
  rental              Rental?   @relation(fields: [rentalId], references: [rentalId])
  purchaseOrder       PurchaseOrder? @relation(fields: [poId], references: [poId])

  @@map("CLAIM")
}

